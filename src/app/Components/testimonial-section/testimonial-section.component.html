<section class="testimonial-slider" role="region" aria-label="Student testimonials slider" style="direction: ltr;">
    <div class="slider-container" 
        >
      <div class="slides" [style.transform]="'translateX(' + (-currentIndex * 100) + '%)'">
        <div class="slide" *ngFor="let testimonial of testimonials; let i = index">
          <div class="testimonial-card" 
               (click)="openModal(i)"
               (keydown.enter)="openModal(i)"
               tabindex="0"
               role="button"
               [attr.aria-label]="'View testimonial from ' + testimonial.studentName">
            <div class="testimonial-image-container">
              <img [src]="testimonial.imageUrl" 
                   [alt]="testimonial.altText"
                   loading="lazy"
                   class="testimonial-image">
            </div>
            <div class="testimonial-info">
              <!-- <h3>{{ testimonial.studentName }}</h3>
              <p>{{ testimonial.groupName }}</p>
              <blockquote class="testimonial-quote">
                "{{ testimonial.quote }}"
              </blockquote> -->
            </div>
          </div>
        </div>
      </div>
  
      <button class="nav-button prev" 
              (click)="prevSlide()" 
              [disabled]="currentIndex === 0"
              aria-label="Previous testimonial">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
      </button>
      <button class="nav-button next" 
              (click)="nextSlide()" 
              [disabled]="currentIndex === testimonials.length - 1"
              aria-label="Next testimonial">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
      </button>
    </div>
  
    <div class="slider-dots" role="tablist">
      <button *ngFor="let dot of testimonials; let i = index" 
              class="dot" 
              [class.active]="i === currentIndex"
              (click)="goToSlide(i)"
              role="tab"
              [attr.aria-selected]="i === currentIndex"
              [attr.aria-label]="'Go to testimonial ' + (i + 1)">
      </button>
    </div>
  </section>


  <div class="modal" style="direction: ltr;"
  *ngIf="modalOpen" 
  (click)="closeModal()"
  role="dialog"
  aria-label="Testimonial viewer">
<div class="modal-content" 
    (click)="$event.stopPropagation()"
    #modalContent>
 <button class="close-button" 
         (click)="closeModal()"
         aria-label="Close modal">
   <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
 </button>
 <div class="modal-slider">
   <div class="modal-slides" [style.transform]="'translateX(' + (-modalIndex * 100) + '%)'">
     <div class="modal-slide" *ngFor="let testimonial of testimonials; let i = index">
       <div class="image-container" 
            [style.transform]="'scale(' + zoom + ') translate(' + panX + 'px, ' + panY + 'px)'"
            (mousedown)="startPan($event)"
            (mousemove)="pan($event)"
            (mouseup)="endPan()"
            (mouseleave)="endPan()"
            (touchstart)="onTouchStart($event)"
            (touchmove)="onTouchMove($event)"
            (touchend)="onTouchEnd($event)">
         <img [src]="testimonial.imageUrl" 
              [alt]="testimonial.altText"
              class="modal-image">
       </div>
     </div>
   </div>
   <button class="modal-nav-button prev" 
           (click)="prevModalSlide()" 
           [disabled]="modalIndex === 0"
           aria-label="Previous testimonial">
     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
   </button>
   <button class="modal-nav-button next" 
           (click)="nextModalSlide()" 
           [disabled]="modalIndex === testimonials.length - 1"
           aria-label="Next testimonial">
     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
   </button>
 </div>
 <div class="zoom-controls">
   <button (click)="adjustZoom(0.1)" aria-label="Zoom in">
     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="11" y1="8" x2="11" y2="14"></line><line x1="8" y1="11" x2="14" y2="11"></line></svg>
   </button>
   <button (click)="adjustZoom(-0.1)" aria-label="Zoom out">
     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="8" y1="11" x2="14" y2="11"></line></svg>
   </button>
   <button (click)="resetZoom()" aria-label="Reset zoom">Reset</button>
 </div>
</div>
</div>